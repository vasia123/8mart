/**
 * Модуль сюжета детективной игры
 * Содержит данные о локациях, текстах и подсказках
 */

/**
 * Этапы квеста с сюжетом и подсказками
 * @type {Array<Object>}
 */
const QUEST_STAGES = [
    {
        id: 1,
        // Уникальный идентификатор для URL
        stageKey: 'ei374kfthie',
        locationName: "Кофемашина",
        storyText: "Доброе утро, дамы! Я - детектив Роза Шерлок. Сегодня, в этот прекрасный праздник, произошло ЧП: из офиса пропали все праздничные розы! Первая зацепка была обнаружена возле кофемашины - чашка с необычным рисунком на пенке. Помогите мне разгадать этот код!",
        game: "minesweeper",
        difficulty: "easy",
        nextHint: "Отлично! Я заметила, что на чашке был странный отпечаток... Похоже на место, где хранятся листы для принтера. Нужно проверить шкафчик под принтером!"
    },
    {
        id: 2,
        stageKey: 'bfk39dmf8sl',
        locationName: "Шкафчик под принтером",
        storyText: "В шкафчике мы нашли странный листок с недопечатанным фрагментом головоломки. Кажется, это важная улика! Похититель словно играет с нами, оставляя загадки. Давайте соберем эту головоломку и узнаем, куда она нас приведет.",
        game: "puzzle",
        difficulty: "normal",
        nextHint: "Головоломка сложилась в изображение доски с заметками! Преступник явно хочет, чтобы мы заглянули за нее. Поспешим туда!"
    },
    {
        id: 3,
        stageKey: 'cmv49pzx73q',
        locationName: "За доской с заметками",
        storyText: "За доской мы обнаружили записку с вопросами о знаменитых женщинах. Наш похититель - настоящий эрудит! Он оставил нам интеллектуальное испытание. Давайте разгадаем этот квиз и продолжим преследование.",
        game: "quiz",
        difficulty: "normal",
        nextHint: "Браво! Ответив на вопросы, мы получили подсказку: 'Блестящие глаза, мягкие лапы, дискотечный наряд... Он знает, где искать следующую подсказку'. Кажется, это про диско-мишку на столе Екатерины!"
    },
    {
        id: 4,
        stageKey: 'dlp58qrx29n',
        locationName: "Стол с диско-мишкой",
        storyText: "Диско-мишка сидит на столе, окруженный блестками. В его лапах зажата карточка с двумя почти идентичными изображениями. Преступник всё усложняет - теперь нам нужно найти отличия между ними, чтобы получить следующую подсказку.",
        game: "differences",
        difficulty: "normal",
        nextHint: "Отличная работа! На обратной стороне карточки нашлась надпись: 'Тот, кто выше всех в офисе, но не человек, хранит следующую подсказку'. Это должно быть большое растение в углу!"
    },
    {
        id: 5,
        stageKey: 'etv67xyq91w',
        locationName: "Большое офисное растение",
        storyText: "У основания растения мы нашли маленькие карточки, разбросанные в почве. На них изображены парные символы. Кажется, это игра на запоминание! Нам нужно подобрать пары, чтобы узнать, куда двигаться дальше.",
        game: "memory",
        difficulty: "normal",
        nextHint: "Собрав все пары, вы обнаружили на обратной стороне карточек послание: 'Игра продолжается там, где виртуальные миры оживают, а джойстики дарят эмоции'. Очевидно, речь о приставке PS5!"
    },
    {
        id: 6,
        stageKey: 'fpz82vha64k',
        locationName: "Возле приставки PS5",
        storyText: "Рядом с приставкой лежит контроллер и записка с анаграммами весенних цветов. Наш неуловимый похититель продолжает испытывать наши способности! Разгадайте анаграммы, чтобы получить следующую подсказку.",
        game: "anagrams",
        difficulty: "hard",
        nextHint: "Первые буквы разгаданных слов составляют слово 'ХОЛОД'. Очевидно, следующая подсказка ждет нас в самом холодном месте офиса - в холодильнике!"
    },
    {
        id: 7,
        stageKey: 'ghy93jwm75z',
        locationName: "Холодильник",
        storyText: "В холодильнике мы нашли коробку с нарисованным лабиринтом. К ней прикреплена записка: 'Последнее испытание приведет к разгадке тайны пропавших роз. Пройдите лабиринт и узнайте, где спрятан настоящий сюрприз!'",
        game: "maze",
        difficulty: "hard",
        nextHint: "Поздравляю! Вы успешно прошли все испытания и разгадали тайну пропавших роз! Осталось лишь обратиться к организатору игры, чтобы получить заслуженную награду!"
    }
];

/**
 * Получить этап по ключу
 * @param {string} key - Ключ этапа
 * @returns {Object|null} Объект этапа или null, если этап не найден
 */
function getStageByKey(key) {
    return QUEST_STAGES.find(stage => stage.stageKey === key) || null;
}

/**
 * Получить этап по id
 * @param {number} id - ID этапа
 * @returns {Object|null} Объект этапа или null, если этап не найден
 */
function getStageById(id) {
    return QUEST_STAGES.find(stage => stage.id === id) || null;
}

/**
 * Получить первый этап
 * @returns {Object} Первый этап
 */
function getFirstStage() {
    return QUEST_STAGES[0];
}

/**
 * Финальная история для завершения квеста
 * @type {string}
 */
const FINAL_STORY = `
Дорогие участницы! Вы блестяще справились с детективным расследованием!

Раскрыта тайна пропавших роз: они не были украдены, а лишь временно спрятаны, чтобы подготовить для вас особый сюрприз к 8 марта. За всей этой головоломкой стояли ваши коллеги, которые хотели сделать этот день незабываемым.

Спасибо за ваше участие, смекалку и настойчивость. Теперь вас ждут заслуженные призы и, конечно же, те самые прекрасные розы!

С праздником 8 марта!
`;